<!DOCTYPE html>
<html>

<head>
  <meta charset='utf-8'>
  <meta name='viewport' content='width=device-width, initial-scale=1, shrink-to-fit=no'>

  <title>GDP using D3 v.2</title>

  <link href="https://fonts.googleapis.com/css?family=Material+Icons|Raleway" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/vuetify/1.0.8/vuetify.min.css">

  <style>
    /* Hide side scrollbar if content does not need it */
    html {
      overflow-y: auto; 
    }
    
    .application {
      font-family: 'Raleway', sans-serif;
      line-height: 2rem;
      text-align: center;
    }
  </style>
</head>

<body>
  <!-- https://codepen.io/ivanlim/full/ -->
  <!-- Vuetify Material color palette: https://vuetifyjs.com/en/style/colors -->
  <v-app id="app">
    <v-container mt-4 fluid>
      <v-layout wrap justify-center>
        <v-flex xs12 class="mb-5">
          <h1 v-text="appName"></h2>
        </v-flex>

        <v-flex xs12 class="mb-5">
          <d3-bar-chart
            :d3-data="d3Data"
          ></d3-bar-chart>
        </v-flex>

      </v-layout>
    </v-container>
  </v-app>

  <script src='https://cdn.jsdelivr.net/npm/vue'></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/vuetify/1.0.8/vuetify.min.js"></script>
  <script src="https://d3js.org/d3.v4.min.js"></script>
  <script src="./components/d3-bar-chart.js"></script>
  <script type='text/javascript'>
    let v = new Vue({
      el: '#app',
      data () {
        return {
          appName: 'US Gross Domestic Product',
          d3Data: {}
        }
      },
      methods: {
        
      },
      mounted () {
        let url = 'https://raw.githubusercontent.com/FreeCodeCamp/ProjectReferenceData/master/GDP-data.json';
        fetch(url)
          .then(response => response.json())
          .then(json => {
            let d3DataX = [];
            let d3DataY = [];
            json.data.forEach(([date, value]) => {
              d3DataX.push(+date.substr(0, 4));
              d3DataY.push(value);
            });
            this.d3Data = {
              x: d3DataX,
              y: d3DataY
            };
            // this.d3DataY = d3DataY;
            // this.d3DataX = d3DataX;
            // this.d3DataY = [1, 2, 3];
            // this.d3DataX = [10, 20, 30];
            // console.log('toremove', this.d3DataX)
            // this.createChart();
          })
          .catch(error => {
            console.error("Error encountered", error);
          });
      }
    });
  </script>
</body>